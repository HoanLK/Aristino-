frontApp.controller("productController",["$scope","$http","$window","$sce",function(n,t,i,r){n.product={};n.products=[];n.idCategoryProduct;n.idProduct=angular.element("#idProduct").val();n.order={};n.thongKe={};n.loadThongKe={};t.get("/API/ProductsAPI/"+n.idProduct).success(function(i){n.product=i;n.product.content=r.trustAsHtml(i.content);n.product.timeStart=n.product.timeStart!=null?new Date(n.product.timeStart):null;n.idCategoryProduct=i.idCategoryProduct;t.get("/API/ProductsAPI/").success(function(t){angular.forEach(t,function(t){t.idCategoryProduct==n.idCategoryProduct&&t.idProduct!=n.idProduct&&n.products.push(t)})})});n.SaveOrder=function(){n.order.checked=0;n.order.idProduct=n.idProduct;n.order.sanPham=n.product.title;n.order.gia=n.product.price*n.order.soLuong;n.order.giaSP=n.product.price;t.post("/API/OrderAPI/",n.order).success(function(){toastr.success("Thành công","Đặt hàng")}).error(function(){toastr.error("Thất bại","Đặt hàng")});t.get("/API/ThongKeAPI?value="+n.order.SDT).success(function(i){n.thongKe.id=i.id;n.thongKe.ten=n.order.hoTen;n.thongKe.diaChi=i.diaChi;n.thongKe.SDT=i.SDT;n.thongKe.email=i.email;n.thongKe.soLanMuaHang=i.soLanMuaHang+1;t.put("/API/ThongKeAPI/"+n.thongKe.id,n.thongKe)}).error(function(){n.thongKe.ten=n.order.hoTen;n.thongKe.diaChi=n.order.diaChi;n.thongKe.SDT=n.order.SDT;n.thongKe.email=n.order.email;n.thongKe.soLanMuaHang=1;t.post("/API/ThongKeAPI/",n.thongKe)})};n.size38=function(){n.order.kichThuoc="38"};n.size39=function(){n.order.kichThuoc="39"};n.size40=function(){n.order.kichThuoc="40"};n.size41=function(){n.order.kichThuoc="41"};n.size42=function(){n.order.kichThuoc="42"};n.size43=function(){n.order.kichThuoc="43"};n.sizeS=function(){n.order.kichThuoc="S"};n.sizeM=function(){n.order.kichThuoc="M"};n.sizeL=function(){n.order.kichThuoc="L"};n.sizeXL=function(){n.order.kichThuoc="XL"};n.sizeXXL=function(){n.order.kichThuoc="XXL"}}]);